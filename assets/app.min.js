(()=>{"use strict";const S=(...e)=>document.querySelector(e.join(",")),A=(e)=>document.querySelectorAll(e),R=(e,t)=>{e.textContent=t};let C={},E={},L={},y="en";function I(){document.documentElement.lang=y,A("[data-reveal]").forEach(e=>{o.observe(e)}),O(),T(),B(),D()}function O(){A("[data-i18n]").forEach(e=>{const t=e.getAttribute("data-i18n");const n=E[t];if(typeof n==="string"){R(e,n)}else if(n&&n.__html){e.innerHTML=n.__html}})}function T(){const e=C.mode==="live",t={starter:e&&(C.stripe.starter_live||C.stripe.starter)||C.stripe.starter,standard:e&&(C.stripe.standard_live||C.stripe.standard)||C.stripe.standard,pro:e&&(C.stripe.pro_live||C.stripe.pro)||C.stripe.pro};A('[data-cta="starter"]').forEach(n=>n.setAttribute("href",t.starter));A('[data-cta="standard"]').forEach(n=>n.setAttribute("href",t.standard));A('[data-cta="pro"]').forEach(n=>n.setAttribute("href",t.pro));const a=S("#contactEmail");if(a){a.textContent=L.contact_email;a.href="mailto:"+L.contact_email}const r=S("#onboardingLink");if(r){r.href=L.onboarding_url||"#"}const d=S("#modeBadge");if(d){d.textContent=(e?"LIVE":"TEST")+" mode â€” links open in Stripe "+(e?"LIVE":"TEST")}}function B(){const e=S("#lang-en"),t=S("#lang-es");[e,t].forEach(n=>{n&&n.addEventListener("click",()=>{y=n.getAttribute("data-lang");e.setAttribute("aria-pressed",y==="en");t.setAttribute("aria-pressed",y==="es");fetch("./content/"+y+".json").then(a=>a.json()).then(a=>{E=a;O()})})})}function D(){const e=!("matchMedia"in window)||!window.matchMedia("(prefers-reduced-motion: reduce)").matches;A(".headline-line").forEach((t,n)=>{if(!e)return;t.style.transitionDelay=(.1*n)+"s"}),A(".pcard").forEach((t,n)=>{if(!e)return;t.style.transitionDelay=(.05*n)+"s"})}const o=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&t.target.classList.add("is-visible")})},{rootMargin:"-10% 0px -10% 0px",threshold:.01});window.addEventListener("DOMContentLoaded",()=>{Promise.all([fetch("./content/config.json").then(e=>e.json()),fetch("./content/en.json").then(e=>e.json()),fetch("./content/es.json").then(e=>e.json())]).then(e=>{C=e[0],E=e[1],L={contact_email:C.contact_email||"",onboarding_url:C.onboarding_url||"#"};I()}).catch(e=>{console.error("Content load failed",e)})});})();
